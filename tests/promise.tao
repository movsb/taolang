function main() {
    let p1 = newPromise((resolve,reject)=>{
        reject("a");
    });

    let p2 = p1.then(value=>{
        return newPromise((resolve,reject)=>{
            setTimeout(()=>{
                resolve(11);
            },0);
        });
    },reason=>{
        return newPromise((resolve,reject)=>{
            setTimeout(()=>{
                reject("b");
            },0);
        });
    });

    p2.then(value=>{
        println(value);
    },reason=>{
        println(reason);
    });
}
